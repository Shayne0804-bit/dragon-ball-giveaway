const translations = {
  fr: {
    // Header & Navigation
    title: 'Dragon Ball Giveaway',
    selectGiveaway: 'S√©lectionner un Giveaway',
    giveawayInfo: 'Infos du Giveaway',
    uploadPhotos: 'T√©l√©charger des Photos',
    language: 'Langue',
    french: 'Fran√ßais',
    english: 'English',

    // Giveaway Selection
    noGiveaways: 'Aucun giveaway actif',
    createNew: 'Cr√©er un nouveau giveaway',
    giveawayName: 'Nom du giveaway',
    giveawayDescription: 'Description',
    duration: 'Dur√©e',
    days: 'jours',
    hours: 'heures',
    startGiveaway: 'Lancer le giveaway',
    resetGiveaway: 'Nouvelle Roulette',
    participants: 'Participants',
    winners: 'Gagnants',
    endDate: 'Fin pr√©vue',

    // Photos
    uploadPhotosTitle: 'Ajouter des Photos',
    dragAndDrop: 'Glissez les photos ou cliquez',
    maxPhotos: 'Max 10 photos',
    deletePhoto: 'Supprimer',
    noPhotos: 'Aucune photo t√©l√©charg√©e',

    // Participation
    participateButton: 'Participer',
    discordLoginRequired: 'Connexion Discord requise',
    loginWithDiscord: 'Se connecter avec Discord',
    participationSuccess: 'Participation enregistr√©e!',
    participationError: 'Erreur lors de la participation',
    alreadyParticipated: 'Vous avez d√©j√† particip√© √† ce giveaway',
    nextAllowed: 'Vous pourrez reparticiper dans',
    minutes: 'minutes',
    hours: 'heures',

    // Roulette/Wheel
    spinWheel: 'Tourner la Roue',
    selectWinner: 'S√©lectionner un Gagnant',
    winner: 'GAGNANT!',
    winnerAnnounced: 'Le gagnant a √©t√© annonc√©!',
    noParticipants: 'Aucun participant pour tirer un gagnant',

    // Winners History
    winnersHistory: 'Historique des Gagnants',
    noWinners: 'Aucun gagnant pour le moment',
    date: 'Date',
    rank: 'Rang',

    // Messages
    success: 'Succ√®s',
    error: 'Erreur',
    loading: 'Chargement...',
    deleteConfirm: '√ätes-vous s√ªr de vouloir supprimer ce giveaway?',
    deleteSuccess: 'Giveaway supprim√© avec succ√®s',
    deleteError: 'Erreur lors de la suppression',
    updateSuccess: 'Giveaway mis √† jour',
    updateError: 'Erreur lors de la mise √† jour',

    // Status
    active: 'Actif',
    paused: 'Paus√©',
    completed: 'Termin√©',
    upcoming: '√Ä venir',

    // Admin
    adminPanel: 'Panneau Admin',
    adminPassword: 'Mot de passe admin',
    login: 'Connexion',
    logout: 'D√©connexion',
    loginError: 'Mot de passe incorrect',
    admin: 'Admin',
    createGiveaway: 'Cr√©er un Giveaway',
    giveawayPhotos: 'Photos du Giveaway',
    noPhotosAvailable: 'Aucune photo disponible',
    participateButton: 'Participer Maintenant',
    connected: 'Connect√©',
    selectGiveawayFirst: 'S√©lectionnez d\'abord un giveaway',
    noParticipants: 'Aucun participant',
    spinWheel: 'Lancer la Roulette',
    winner: 'GAGNANT!',
    newWheel: 'Nouvelle Roulette',
    statistics: 'Statistiques',
    timeRemaining: 'Temps Restant',
    endDate: 'Fin',
    photoCount: 'Photos',
    participantsCount: 'Participants',
    winners: 'Gagnants',
    winnersHistory: 'Historique des Gagnants',
    noWinnersYet: 'Aucun gagnant pour le moment',
    manageAdmin: 'Gestion Admin',
    createNewGiveaway: 'Cr√©er Giveaway',
    selectGiveawayAdm: 'S√©lectionner',
    giveawayDetails: 'D√©tails du Giveaway',
    accessDenied: 'Acc√®s Refus√©',
    youNeedServer: 'Vous avez besoin d\'acc√®s au serveur Discord pour participer',
    selectGiveawayModal: 'S√©lectionner un Giveaway',
    noGiveawaysAvailable: 'Aucun giveaway disponible',
    createNewModal: 'Cr√©er un Giveaway',
    selectPhotos: 'S√©lectionner les photos',
    optional: '(optionnel)',
    dragPhotosHere: 'Vous pouvez s√©lectionner plusieurs images',
    create: 'Cr√©er',
    adminLogin: 'Connexion Admin',
    password: 'Mot de passe',
    connect: 'Se Connecter',
    uploadInProgress: 'Upload en cours...',
    previous: '‚Üê Pr√©c√©dent',
    next: 'Suivant ‚Üí',

    // Shop
    shop: 'Boutique',
    availableItems: 'Articles Disponibles',
    shoppingCart: 'Panier',
    emptyCart: 'Votre panier est vide',
    continueShopping: '‚Üê Continuer',
    buy: 'üí≥ Acheter',
    select: '‚ûï S√©lectionner',
    outOfStock: '‚ùå Rupture',
    unlimited: 'Stock Illimit√©',
    inStock: '‚úì En Stock',
    remaining: 'Restant',
    clear: 'üóëÔ∏è Vider',
    total: 'Total',
    orderConfirmed: 'üéâ Commande confirm√©e!',
    mustLoginDiscord: '‚ùå Vous devez vous connecter via Discord pour acheter',
    emptyCartError: 'Votre panier est vide',
    adminManagement: 'Gestion de la Boutique',
    addItem: '‚ûï Ajouter Article',
    editItem: '‚úèÔ∏è √âditer',
    deleteItem: 'üóëÔ∏è Supprimer',
    addArticle: 'Ajouter un Article',
    editArticle: 'Modifier l\'Article',
    itemName: 'Nom du produit',
    itemDescription: 'Description (optionnel)',
    itemPrice: 'Prix',
    itemCategory: 'Cat√©gorie (ex: Divers)',
    selectImage: 'S√©lectionner une image',
    itemQuantity: 'Quantit√© (laisser vide = illimit√©)',
    accountId: 'ID Compte (ex: ACC001)',
    accountDetails: 'D√©tails du compte (optionnel)',
    cancel: 'Annuler',
    save: 'Sauvegarder',
    confirmDelete: 'Confirmer la suppression',
    deleteMessage: '√ätes-vous s√ªr de vouloir supprimer cet article?',
    confirm: 'Confirmer',
    noItems: 'Aucun article disponible pour le moment',
    noItemsManagement: 'Aucun article ajout√©',
    name: 'Nom',
    description: 'Description',
    price: 'Prix',
    category: 'Cat√©gorie',
    stock: 'Stock',
    actions: 'Actions',
    management: 'Gestion',
    currency: 'Devise',
    EUR: 'EUR ‚Ç¨',
    USD: 'USD $',
    FCFA: 'FCFA',
  },
  en: {
    // Header & Navigation
    title: 'Dragon Ball Giveaway',
    selectGiveaway: 'Select a Giveaway',
    giveawayInfo: 'Giveaway Info',
    uploadPhotos: 'Upload Photos',
    language: 'Language',
    french: 'Fran√ßais',
    english: 'English',

    // Giveaway Selection
    noGiveaways: 'No active giveaways',
    createNew: 'Create a new giveaway',
    giveawayName: 'Giveaway name',
    giveawayDescription: 'Description',
    duration: 'Duration',
    days: 'days',
    hours: 'hours',
    startGiveaway: 'Start giveaway',
    resetGiveaway: 'New Wheel',
    participants: 'Participants',
    winners: 'Winners',
    endDate: 'Expected end',

    // Photos
    uploadPhotosTitle: 'Add Photos',
    dragAndDrop: 'Drag photos here or click',
    maxPhotos: 'Max 10 photos',
    deletePhoto: 'Delete',
    noPhotos: 'No photos uploaded',

    // Participation
    participateButton: 'Participate',
    discordLoginRequired: 'Discord login required',
    loginWithDiscord: 'Login with Discord',
    participationSuccess: 'Participation registered!',
    participationError: 'Error during participation',
    alreadyParticipated: 'You have already participated in this giveaway',
    nextAllowed: 'You can participate again in',
    minutes: 'minutes',
    hours: 'hours',

    // Roulette/Wheel
    spinWheel: 'Spin the Wheel',
    selectWinner: 'Select a Winner',
    winner: 'WINNER!',
    winnerAnnounced: 'The winner has been announced!',
    noParticipants: 'No participants to draw a winner',

    // Winners History
    winnersHistory: 'Winners History',
    noWinners: 'No winners yet',
    date: 'Date',
    rank: 'Rank',

    // Messages
    success: 'Success',
    error: 'Error',
    loading: 'Loading...',
    deleteConfirm: 'Are you sure you want to delete this giveaway?',
    deleteSuccess: 'Giveaway deleted successfully',
    deleteError: 'Error deleting giveaway',
    updateSuccess: 'Giveaway updated',
    updateError: 'Error updating giveaway',

    // Status
    active: 'Active',
    paused: 'Paused',
    completed: 'Completed',
    upcoming: 'Upcoming',

    // Admin
    adminPanel: 'Admin Panel',
    adminPassword: 'Admin password',
    login: 'Login',
    logout: 'Logout',
    loginError: 'Incorrect password',
    admin: 'Admin',
    createGiveaway: 'Create Giveaway',
    giveawayPhotos: 'Giveaway Photos',
    noPhotosAvailable: 'No photos available',
    participateButton: 'Participate Now',
    connected: 'Connected',
    selectGiveawayFirst: 'Please select a giveaway first',
    noParticipants: 'No participants',
    spinWheel: 'Spin the Wheel',
    winner: 'WINNER!',
    newWheel: 'New Wheel',
    statistics: 'Statistics',
    timeRemaining: 'Time Remaining',
    endDate: 'End',
    photoCount: 'Photos',
    participantsCount: 'Participants',
    winners: 'Winners',
    winnersHistory: 'Winners History',
    noWinnersYet: 'No winners yet',
    manageAdmin: 'Admin Management',
    createNewGiveaway: 'Create Giveaway',
    selectGiveawayAdm: 'Select',
    giveawayDetails: 'Giveaway Details',
    accessDenied: 'Access Denied',
    youNeedServer: 'You need access to the Discord server to participate',
    selectGiveawayModal: 'Select a Giveaway',
    noGiveawaysAvailable: 'No giveaways available',
    createNewModal: 'Create a Giveaway',
    selectPhotos: 'Select photos',
    optional: '(optional)',
    dragPhotosHere: 'You can select multiple images',
    create: 'Create',
    adminLogin: 'Admin Login',
    password: 'Password',
    connect: 'Login',
    uploadInProgress: 'Upload in progress...',
    previous: '‚Üê Previous',
    next: 'Next ‚Üí',

    // Shop
    shop: 'Shop',
    availableItems: 'Available Items',
    shoppingCart: 'Shopping Cart',
    emptyCart: 'Your cart is empty',
    continueShopping: '‚Üê Continue',
    buy: 'üí≥ Buy',
    select: '‚ûï Select',
    outOfStock: '‚ùå Out of Stock',
    unlimited: 'Unlimited Stock',
    inStock: '‚úì In Stock',
    remaining: 'Remaining',
    clear: 'üóëÔ∏è Clear',
    total: 'Total',
    orderConfirmed: 'üéâ Order confirmed!',
    mustLoginDiscord: '‚ùå You must login via Discord to purchase',
    emptyCartError: 'Your cart is empty',
    adminManagement: 'Shop Management',
    addItem: '‚ûï Add Item',
    editItem: '‚úèÔ∏è Edit',
    deleteItem: 'üóëÔ∏è Delete',
    addArticle: 'Add an Item',
    editArticle: 'Edit Item',
    itemName: 'Product name',
    itemDescription: 'Description (optional)',
    itemPrice: 'Price',
    itemCategory: 'Category (ex: Miscellaneous)',
    selectImage: 'Select an image',
    itemQuantity: 'Quantity (leave empty = unlimited)',
    accountId: 'Account ID (ex: ACC001)',
    accountDetails: 'Account details (optional)',
    cancel: 'Cancel',
    save: 'Save',
    confirmDelete: 'Confirm deletion',
    deleteMessage: 'Are you sure you want to delete this item?',
    confirm: 'Confirm',
    noItems: 'No items available at the moment',
    noItemsManagement: 'No items added',
    name: 'Name',
    description: 'Description',
    price: 'Price',
    category: 'Category',
    stock: 'Stock',
    actions: 'Actions',
    management: 'Management',
    currency: 'Currency',
    EUR: 'EUR ‚Ç¨',
    USD: 'USD $',
    FCFA: 'FCFA',
  },
};

/**
 * Obtenir la traduction pour une cl√©
 */
function t(key, lang = 'fr') {
  return translations[lang]?.[key] || key;
}

/**
 * Initialiser le syst√®me de langue
 */
function initLanguage() {
  // R√©cup√©rer la langue du localStorage ou utiliser le fran√ßais par d√©faut
  let currentLang = localStorage.getItem('language') || 'fr';
  window.currentLanguage = currentLang;
  
  // Ajouter la langue au body pour les styles CSS
  document.documentElement.lang = currentLang;
  
  return currentLang;
}

/**
 * Changer la langue
 */
function setLanguage(lang) {
  if (!translations[lang]) {
    console.warn(`Language ${lang} not supported`);
    return;
  }
  
  window.currentLanguage = lang;
  localStorage.setItem('language', lang);
  document.documentElement.lang = lang;
  
  console.log(`[i18n] Changement de langue vers: ${lang}`);
  translatePage();
  
  // √âmettre un √©v√©nement pour que les autres scripts sachent que la langue a chang√©
  window.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
}

/**
 * Traduire tout le contenu texte de la page
 */
function translatePage() {
  const lang = window.currentLanguage || 'fr';
  
  // Traduire les √©l√©ments avec data-i18n
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    const translation = t(key, lang);
    
    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
      element.placeholder = translation;
    } else if (element.tagName === 'BUTTON') {
      // Pour les boutons, pr√©server les ic√¥nes/emojis avant le texte
      const textContent = element.textContent.trim();
      // Chercher si le bouton commence par une ic√¥ne/emoji
      const emojiMatch = textContent.match(/^[\s\p{Emoji_Presentation}]+/u);
      if (emojiMatch) {
        element.textContent = emojiMatch[0] + translation;
      } else {
        element.textContent = translation;
      }
    } else {
      element.textContent = translation;
    }
  });

  // Traduire les placeholders
  document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
    const key = element.getAttribute('data-i18n-placeholder');
    element.placeholder = t(key, lang);
  });

  // Traduire les titles
  document.querySelectorAll('[data-i18n-title]').forEach(element => {
    const key = element.getAttribute('data-i18n-title');
    element.title = t(key, lang);
  });

  // Traduire les values (pour buttons avec textContent)
  document.querySelectorAll('[data-i18n-value]').forEach(element => {
    const key = element.getAttribute('data-i18n-value');
    const translation = t(key, lang);
    // Pr√©server les ic√¥nes comme pour les buttons
    const textContent = element.textContent.trim();
    const emojiMatch = textContent.match(/^[\s\p{Emoji_Presentation}]+/u);
    if (emojiMatch) {
      element.textContent = emojiMatch[0] + translation;
    } else {
      element.textContent = translation;
    }
  });

  console.log(`[i18n] Page traduite en ${lang}`);
}
