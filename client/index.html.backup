<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Giveaway Platform</title>
  <link rel="icon" type="image/jpeg" href="assets/dragon-ball-icon.jpg">
  <link rel="stylesheet" href="style-new.css">
  <link rel="stylesheet" href="photos-simplified.css">
</head>
<body>
  <!-- Background -->
  <video id="backgroundVideo" class="background-video" autoplay muted loop>
    <source src="assets/background.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <!-- Page Container -->
  <div class="page-wrapper">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-section">
          <img src="assets/dragon-ball-icon.jpg" alt="Logo" class="logo-image">
          <div class="logo-text">
            <h1>Giveaway Platform</h1>
            <p>Participez et gagnez des prix</p>
          </div>
        </div>
        <button id="adminLoginBtn" class="btn-admin">ğŸ” Admin</button>
      </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
      <!-- Left Section -->
      <section class="section-left">
        <!-- Giveaway Selection -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">ğŸ</span>
            <h2>Giveaways Disponibles</h2>
          </div>
          <div class="card-body">
            <button id="publicSelectGiveawayBtn" class="btn btn-primary btn-full">Voir les Giveaways</button>
            <div id="giveawaysList" class="giveaways-list"></div>
          </div>
        </div>

        <!-- Giveaway Info -->
        <div id="giveawayInfoSection" class="card hidden">
          <div class="card-header">
            <span class="card-icon">ğŸ¯</span>
            <div>
              <h2 id="selectedGiveawayName">Giveaway Actif</h2>
              <p id="giveawayDescription" class="card-subtitle">-</p>
            </div>
            <button id="clearGiveawayBtn" class="btn-close">âœ•</button>
          </div>
          <div class="card-body">
            <div class="info-grid">
              <div class="info-item">
                <span class="info-icon">â°</span>
                <div>
                  <p class="info-label">Temps Restant</p>
                  <p id="giveawayTimeLeft" class="info-value">-</p>
                </div>
              </div>
              <div class="info-item">
                <span class="info-icon">ğŸ‘¥</span>
                <div>
                  <p class="info-label">Participants</p>
                  <p id="giveawayParticipantCount" class="info-value">0</p>
                </div>
              </div>
              <div class="info-item">
                <span class="info-icon">ğŸ“¸</span>
                <div>
                  <p class="info-label">Photos</p>
                  <p id="giveawayPhotoCount" class="info-value">0</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Photos -->
        <div id="photosSection" class="card hidden">
          <div class="card-header">
            <span class="card-icon">ğŸ“·</span>
            <h2>Photos du Giveaway</h2>
          </div>
          <div class="card-body">
            <div id="publicGiveawayPhotosList" class="photos-grid"></div>
            <p id="noPublicPhotosMessage" class="empty-state" style="display: none;">Aucune photo disponible</p>
          </div>
        </div>

        <!-- Participation -->
        <div class="card card-accent">
          <div class="card-header">
            <span class="card-icon">âœ¨</span>
            <h2>Participer au Giveaway</h2>
          </div>
          <div class="card-body">
            <div id="selectGiveawayFirstMessage" class="alert alert-warning hidden">
              âš ï¸ SÃ©lectionnez d'abord un giveaway
            </div>

            <!-- Discord Auth Section -->
            <div class="discord-section">
              <div id="discordUserInfo" class="discord-profile hidden">
                <img id="discordAvatarImg" src="" alt="Avatar" class="discord-avatar">
                <div class="discord-info">
                  <p class="discord-username"></p>
                  <p class="discord-status">âœ… ConnectÃ©</p>
                </div>
              </div>

              <button id="discordLoginBtn" class="btn btn-discord">
                <span class="discord-icon">ğŸ”—</span>
                Se connecter avec Discord
              </button>
              <button id="discordLogoutBtn" class="btn btn-danger hidden">
                <span>ğŸšª</span>
                Se dÃ©connecter
              </button>
            </div>

            <!-- Participation Form -->
            <form id="participantForm" class="form">
              <button type="submit" class="btn btn-primary btn-full btn-lg">
                âœ¨ Participer Maintenant
              </button>
              <div id="messageBox" class="message-box"></div>
            </form>
          </div>
        </div>
      </section>

      <!-- Right Section -->
      <section class="section-right">
        <!-- Participants List -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">ğŸ‘¥</span>
            <h2>Participants</h2>
            <span class="badge" id="participantsCountBadge">0</span>
          </div>
          <div class="card-body scrollable">
            <div id="participantsList" class="participants-list">
              <p class="empty-state">Aucun participant</p>
            </div>
          </div>
        </div>

        <!-- Roulette -->
        <div class="card card-roulette">
          <div class="card-header">
            <span class="card-icon">ğŸ¡</span>
            <h2>Roulette</h2>
          </div>
          <div class="card-body card-center">
            <div class="roulette-container">
              <canvas id="wheelCanvas" width="280" height="280" class="wheel"></canvas>
              <div class="pointer"></div>
            </div>
            <button id="spinButton" class="btn btn-success btn-full btn-lg">Lancer la Roulette</button>
            
            <div id="winnerDisplay" class="winner-box hidden">
              <div class="winner-confetti"></div>
              <h3>ğŸ† GAGNANT! ğŸ†</h3>
              <p id="winnerName" class="winner-name">-</p>
              <button id="resetButton" class="btn btn-secondary">Nouvelle Roulette</button>
            </div>
          </div>
        </div>

        <!-- Statistics -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">ğŸ“Š</span>
            <h2>Statistiques</h2>
          </div>
          <div class="card-body">
            <div class="stats-grid">
              <div class="stat-box">
                <p class="stat-label">Participants</p>
                <p id="participantCount" class="stat-value">0</p>
              </div>
              <div class="stat-box">
                <p class="stat-label">Gagnants</p>
                <p id="winnerCount" class="stat-value">0</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Winners History -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">ğŸ†</span>
            <h2>Historique des Gagnants</h2>
          </div>
          <div class="card-body scrollable">
            <div id="winnersList" class="winners-list">
              <p class="empty-state">Aucun gagnant pour le moment</p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Admin Section (initially hidden) -->
    <div id="adminGiveawaySection" class="admin-section hidden">
      <div class="card">
        <div class="card-header admin-header">
          <span class="card-icon">âš™ï¸</span>
          <h2>Gestion Admin</h2>
          <span class="admin-badge">Admin</span>
        </div>
        <div class="card-body">
          <div class="admin-buttons">
            <button id="createNewGiveawayBtn" class="btn btn-primary">â• CrÃ©er Giveaway</button>
            <button id="selectGiveawayBtn" class="btn btn-secondary">ğŸ¡ SÃ©lectionner</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <!-- Participation Modal -->
  <div id="participationModal" class="modal hidden">
    <div class="modal-content">
      <button class="modal-close">âœ•</button>
      <div id="participationContent"></div>
    </div>
  </div>

  <!-- Admin Login Modal -->
  <div id="adminLoginModal" class="modal hidden">
    <div class="modal-content modal-sm">
      <button id="closeAdminLoginModal" class="modal-close">âœ•</button>
      <h2>Connexion Admin</h2>
      <form id="adminLoginForm">
        <input type="password" id="adminLoginPassword" class="input" placeholder="Mot de passe" required>
        <button type="submit" class="btn btn-primary btn-full">Se Connecter</button>
      </form>
      <div id="adminLoginMessage" class="message-box"></div>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div id="loadingSpinner" class="spinner hidden"></div>

  <script src="app.js"></script>
</body>
</html>
